{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chlih\\\\OneDrive\\\\Bureau\\\\Satge\\\\clonegthb\\\\frontend\\\\src\\\\pages\\\\Extraction.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Typography, Paper, Stepper, Step, StepLabel, Button, TextField, FormControlLabel, Checkbox, MenuItem, Box, Grid, Chip, CircularProgress, Divider, Alert } from '@mui/material';\nimport { toast } from 'react-toastify';\nimport { Cloud as CloudIcon, CheckCircle as CheckIcon, Error as ErrorIcon, LinkOff as LinkOffIcon } from '@mui/icons-material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000/api';\n\n// Étapes du processus d'extraction\nconst steps = ['URL', 'Configuration', 'Éléments', 'Extraction', 'Résultats'];\nconst Extraction = ({\n  addTask\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [activeStep, setActiveStep] = useState(0);\n  const [url, setUrl] = useState('');\n  const [useSelenium, setUseSelenium] = useState(false);\n  const [handlePagination, setHandlePagination] = useState(false);\n  const [maxPages, setMaxPages] = useState(5);\n  const [outputFormat, setOutputFormat] = useState('JSON');\n  const [availableElements, setAvailableElements] = useState({});\n  const [selectedElements, setSelectedElements] = useState([]);\n  const [isValidUrl, setIsValidUrl] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [taskId, setTaskId] = useState(null);\n  const [taskStatus, setTaskStatus] = useState('');\n  const [progress, setProgress] = useState(0);\n  const websocket = useRef(null);\n\n  // Valider l'URL\n  useEffect(() => {\n    const validateUrl = () => {\n      try {\n        const urlObj = new URL(url);\n        setIsValidUrl(urlObj.protocol === 'http:' || urlObj.protocol === 'https:');\n      } catch {\n        setIsValidUrl(false);\n      }\n    };\n    validateUrl();\n  }, [url]);\n\n  // Charger les éléments disponibles lorsque l'URL est validée\n  const fetchAvailableElements = async () => {\n    if (!isValidUrl) return;\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await axios.get(`${API_BASE_URL}/elements?url=${encodeURIComponent(url)}`);\n      setAvailableElements(response.data);\n    } catch (err) {\n      console.error('Erreur lors de la récupération des éléments:', err);\n      setError('Impossible d\\'analyser la page. Vérifiez l\\'URL ou essayez d\\'utiliser Selenium.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Connecter au WebSocket pour les mises à jour en temps réel\n  const connectWebSocket = id => {\n    const ws = new WebSocket(`ws://localhost:8000/ws/${id}`);\n    ws.onopen = () => {\n      console.log('WebSocket connecté');\n    };\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      console.log('Mise à jour WebSocket:', data);\n      setTaskStatus(data.status);\n      if (data.progress !== undefined) {\n        setProgress(data.progress);\n      }\n      if (data.status === 'completed') {\n        toast.success('Extraction terminée avec succès!');\n        navigate(`/results/${id}`);\n      } else if (data.status === 'failed') {\n        toast.error(`Erreur: ${data.error || 'Échec de l\\'extraction'}`);\n      }\n    };\n    ws.onerror = error => {\n      console.error('Erreur WebSocket:', error);\n      toast.error('Problème de connexion aux mises à jour en temps réel');\n    };\n    websocket.current = ws;\n    return ws;\n  };\n\n  // Nettoyer la connexion WebSocket à la déconnexion\n  useEffect(() => {\n    return () => {\n      if (websocket.current && websocket.current.readyState === WebSocket.OPEN) {\n        websocket.current.close();\n      }\n    };\n  }, []);\n\n  // Démarrer l'extraction\n  const startExtraction = async () => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await axios.post(`${API_BASE_URL}/scrape`, {\n        url,\n        elements: selectedElements,\n        use_selenium: useSelenium,\n        handle_pagination: handlePagination,\n        max_pages: maxPages,\n        output_format: outputFormat\n      });\n      const {\n        task_id\n      } = response.data;\n      setTaskId(task_id);\n\n      // Ajout de la tâche à l'historique\n      addTask({\n        id: task_id,\n        url,\n        timestamp: new Date().toISOString(),\n        status: 'running'\n      });\n\n      // Connecter au WebSocket pour les mises à jour\n      connectWebSocket(task_id);\n\n      // Passer à la dernière étape\n      setActiveStep(4);\n    } catch (err) {\n      console.error('Erreur lors du démarrage de l\\'extraction:', err);\n      setError('Impossible de démarrer l\\'extraction. Veuillez réessayer.');\n      toast.error('Échec du démarrage de l\\'extraction');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Gérer les changements d'étape\n  const handleNext = () => {\n    if (activeStep === 0 && isValidUrl) {\n      fetchAvailableElements();\n    } else if (activeStep === 3) {\n      startExtraction();\n      return;\n    }\n    setActiveStep(prevStep => prevStep + 1);\n  };\n  const handleBack = () => {\n    setActiveStep(prevStep => prevStep - 1);\n  };\n\n  // Gérer la sélection des éléments\n  const toggleElement = element => {\n    if (selectedElements.includes(element)) {\n      setSelectedElements(selectedElements.filter(e => e !== element));\n    } else {\n      setSelectedElements([...selectedElements, element]);\n    }\n  };\n\n  // Contenu par étape\n  const getStepContent = step => {\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"URL du site \\xE0 extraire\",\n            variant: \"outlined\",\n            value: url,\n            onChange: e => setUrl(e.target.value),\n            error: !isValidUrl && url !== '',\n            helperText: !isValidUrl && url !== '' ? 'Veuillez entrer une URL valide (ex: https://www.example.com)' : '',\n            sx: {\n              mb: 3\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            children: \"Entrez l'URL compl\\xE8te du site web dont vous souhaitez extraire les donn\\xE9es.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this);\n      case 1:\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: useSelenium,\n              onChange: e => setUseSelenium(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this),\n            label: \"Utiliser Selenium pour les sites dynamiques (JavaScript)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            sx: {\n              my: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: handlePagination,\n              onChange: e => setHandlePagination(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this),\n            label: \"Extraire plusieurs pages (pagination)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), handlePagination && /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"number\",\n            label: \"Nombre maximum de pages\",\n            value: maxPages,\n            onChange: e => setMaxPages(Math.max(1, parseInt(e.target.value) || 1)),\n            InputProps: {\n              inputProps: {\n                min: 1,\n                max: 100\n              }\n            },\n            sx: {\n              ml: 3,\n              width: 150\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            sx: {\n              my: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            select: true,\n            label: \"Format de sortie\",\n            value: outputFormat,\n            onChange: e => setOutputFormat(e.target.value),\n            fullWidth: true,\n            sx: {\n              mt: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"JSON\",\n              children: \"JSON\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"CSV\",\n              children: \"CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Excel\",\n              children: \"Excel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Texte\",\n              children: \"Texte\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3\n          },\n          children: [isLoading ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center',\n              mt: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this) : error ? /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            sx: {\n              mb: 3\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this) : Object.keys(availableElements).length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n            children: \"Aucun \\xE9l\\xE9ment trouv\\xE9 sur cette page. Essayez d'utiliser Selenium pour les sites dynamiques.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            children: Object.entries(availableElements).map(([element, count]) => count > 0 && /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              md: 4,\n              children: /*#__PURE__*/_jsxDEV(Chip, {\n                label: `${element} (${count})`,\n                onClick: () => toggleElement(element),\n                color: selectedElements.includes(element) ? \"primary\" : \"default\",\n                sx: {\n                  width: '100%',\n                  height: 40,\n                  fontSize: '1rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 23\n              }, this)\n            }, element, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), Object.keys(availableElements).length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle1\",\n              children: [\"\\xC9l\\xE9ments s\\xE9lectionn\\xE9s: \", selectedElements.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"R\\xE9sum\\xE9 de l'extraction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                children: \"URL:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"textSecondary\",\n                children: url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                children: \"Configuration:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"textSecondary\",\n                children: [useSelenium ? '✅' : '❌', \" Selenium |\", handlePagination ? `✅ Pagination (${maxPages} pages)` : '❌ Pagination', \" | Format: \", outputFormat]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                children: \"\\xC9l\\xE9ments \\xE0 extraire:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mt: 1,\n                  display: 'flex',\n                  flexWrap: 'wrap',\n                  gap: 1\n                },\n                children: selectedElements.map(element => /*#__PURE__*/_jsxDEV(Chip, {\n                  label: element,\n                  size: \"small\",\n                  color: \"primary\"\n                }, element, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this);\n      case 4:\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3,\n            textAlign: 'center'\n          },\n          children: isLoading || taskStatus === 'running' ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              variant: \"determinate\",\n              value: progress,\n              size: 80,\n              thickness: 4,\n              sx: {\n                mb: 3\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: [\"Extraction en cours... \", progress, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              sx: {\n                mt: 1\n              },\n              children: \"Veuillez patienter pendant que nous extrayons vos donn\\xE9es.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this) : taskStatus === 'completed' ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CheckIcon, {\n              color: \"success\",\n              sx: {\n                fontSize: 80,\n                mb: 3\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"Extraction termin\\xE9e avec succ\\xE8s!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              onClick: () => navigate(`/results/${taskId}`),\n              sx: {\n                mt: 3\n              },\n              children: \"Voir les r\\xE9sultats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this) : taskStatus === 'failed' ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(ErrorIcon, {\n              color: \"error\",\n              sx: {\n                fontSize: 80,\n                mb: 3\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"L'extraction a \\xE9chou\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              sx: {\n                mt: 1\n              },\n              children: error || \"Une erreur s'est produite lors de l'extraction.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: () => setActiveStep(0),\n              sx: {\n                mt: 3\n              },\n              children: \"R\\xE9essayer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CloudIcon, {\n              color: \"primary\",\n              sx: {\n                fontSize: 80,\n                mb: 3\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"Pr\\xEAt \\xE0 d\\xE9marrer l'extraction\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              onClick: startExtraction,\n              sx: {\n                mt: 3\n              },\n              children: \"Lancer l'extraction\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this);\n      default:\n        return 'Unknown step';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    sx: {\n      py: 4\n    },\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 4,\n        borderRadius: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        align: \"center\",\n        children: \"Extraire des donn\\xE9es web\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Stepper, {\n        activeStep: activeStep,\n        alternativeLabel: true,\n        sx: {\n          mb: 5\n        },\n        children: steps.map(label => /*#__PURE__*/_jsxDEV(Step, {\n          children: /*#__PURE__*/_jsxDEV(StepLabel, {\n            children: label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)\n        }, label, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this), getStepContent(activeStep), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          mt: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          disabled: activeStep === 0 || activeStep === 4,\n          onClick: handleBack,\n          children: \"Pr\\xE9c\\xE9dent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), activeStep < 4 && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleNext,\n          disabled: activeStep === 0 && !isValidUrl || activeStep === 2 && selectedElements.length === 0 || isLoading,\n          children: activeStep === 3 ? 'Extraire' : 'Suivant'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n};\n_s(Extraction, \"hhQeMlgUiHTcnD5z10ssvUwJ0sw=\", false, function () {\n  return [useNavigate];\n});\n_c = Extraction;\nexport default Extraction;\nvar _c;\n$RefreshReg$(_c, \"Extraction\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","Container","Typography","Paper","Stepper","Step","StepLabel","Button","TextField","FormControlLabel","Checkbox","MenuItem","Box","Grid","Chip","CircularProgress","Divider","Alert","toast","Cloud","CloudIcon","CheckCircle","CheckIcon","Error","ErrorIcon","LinkOff","LinkOffIcon","axios","jsxDEV","_jsxDEV","API_BASE_URL","steps","Extraction","addTask","_s","navigate","activeStep","setActiveStep","url","setUrl","useSelenium","setUseSelenium","handlePagination","setHandlePagination","maxPages","setMaxPages","outputFormat","setOutputFormat","availableElements","setAvailableElements","selectedElements","setSelectedElements","isValidUrl","setIsValidUrl","isLoading","setIsLoading","error","setError","taskId","setTaskId","taskStatus","setTaskStatus","progress","setProgress","websocket","validateUrl","urlObj","URL","protocol","fetchAvailableElements","response","get","encodeURIComponent","data","err","console","connectWebSocket","id","ws","WebSocket","onopen","log","onmessage","event","JSON","parse","status","undefined","success","onerror","current","readyState","OPEN","close","startExtraction","post","elements","use_selenium","handle_pagination","max_pages","output_format","task_id","timestamp","Date","toISOString","handleNext","prevStep","handleBack","toggleElement","element","includes","filter","e","getStepContent","step","sx","mt","children","fullWidth","label","variant","value","onChange","target","helperText","mb","fileName","_jsxFileName","lineNumber","columnNumber","color","control","checked","my","type","Math","max","parseInt","InputProps","inputProps","min","ml","width","select","display","justifyContent","severity","Object","keys","length","container","spacing","entries","map","count","item","xs","sm","md","onClick","height","fontSize","gutterBottom","flexWrap","gap","size","textAlign","flexDirection","alignItems","thickness","maxWidth","py","elevation","p","borderRadius","component","align","alternativeLabel","disabled","_c","$RefreshReg$"],"sources":["C:/Users/chlih/OneDrive/Bureau/Satge/clonegthb/frontend/src/pages/Extraction.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  Container, Typography, Paper, Stepper, Step, StepLabel, \r\n  Button, TextField, FormControlLabel, Checkbox, MenuItem,\r\n  Box, Grid, Chip, CircularProgress, Divider, Alert\r\n} from '@mui/material';\r\nimport { toast } from 'react-toastify';\r\nimport { \r\n  Cloud as CloudIcon, \r\n  CheckCircle as CheckIcon,\r\n  Error as ErrorIcon,\r\n  LinkOff as LinkOffIcon,\r\n} from '@mui/icons-material';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = 'http://localhost:8000/api';\r\n\r\n// Étapes du processus d'extraction\r\nconst steps = ['URL', 'Configuration', 'Éléments', 'Extraction', 'Résultats'];\r\n\r\nconst Extraction = ({ addTask }) => {\r\n  const navigate = useNavigate();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [url, setUrl] = useState('');\r\n  const [useSelenium, setUseSelenium] = useState(false);\r\n  const [handlePagination, setHandlePagination] = useState(false);\r\n  const [maxPages, setMaxPages] = useState(5);\r\n  const [outputFormat, setOutputFormat] = useState('JSON');\r\n  const [availableElements, setAvailableElements] = useState({});\r\n  const [selectedElements, setSelectedElements] = useState([]);\r\n  const [isValidUrl, setIsValidUrl] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [taskId, setTaskId] = useState(null);\r\n  const [taskStatus, setTaskStatus] = useState('');\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  const websocket = useRef(null);\r\n\r\n  // Valider l'URL\r\n  useEffect(() => {\r\n    const validateUrl = () => {\r\n      try {\r\n        const urlObj = new URL(url);\r\n        setIsValidUrl(urlObj.protocol === 'http:' || urlObj.protocol === 'https:');\r\n      } catch {\r\n        setIsValidUrl(false);\r\n      }\r\n    };\r\n    validateUrl();\r\n  }, [url]);\r\n\r\n  // Charger les éléments disponibles lorsque l'URL est validée\r\n  const fetchAvailableElements = async () => {\r\n    if (!isValidUrl) return;\r\n    \r\n    setIsLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await axios.get(`${API_BASE_URL}/elements?url=${encodeURIComponent(url)}`);\r\n      setAvailableElements(response.data);\r\n    } catch (err) {\r\n      console.error('Erreur lors de la récupération des éléments:', err);\r\n      setError('Impossible d\\'analyser la page. Vérifiez l\\'URL ou essayez d\\'utiliser Selenium.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Connecter au WebSocket pour les mises à jour en temps réel\r\n  const connectWebSocket = (id) => {\r\n    const ws = new WebSocket(`ws://localhost:8000/ws/${id}`);\r\n    \r\n    ws.onopen = () => {\r\n      console.log('WebSocket connecté');\r\n    };\r\n    \r\n    ws.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      console.log('Mise à jour WebSocket:', data);\r\n      \r\n      setTaskStatus(data.status);\r\n      if (data.progress !== undefined) {\r\n        setProgress(data.progress);\r\n      }\r\n      \r\n      if (data.status === 'completed') {\r\n        toast.success('Extraction terminée avec succès!');\r\n        navigate(`/results/${id}`);\r\n      } else if (data.status === 'failed') {\r\n        toast.error(`Erreur: ${data.error || 'Échec de l\\'extraction'}`);\r\n      }\r\n    };\r\n    \r\n    ws.onerror = (error) => {\r\n      console.error('Erreur WebSocket:', error);\r\n      toast.error('Problème de connexion aux mises à jour en temps réel');\r\n    };\r\n    \r\n    websocket.current = ws;\r\n    return ws;\r\n  };\r\n\r\n  // Nettoyer la connexion WebSocket à la déconnexion\r\n  useEffect(() => {\r\n    return () => {\r\n      if (websocket.current && websocket.current.readyState === WebSocket.OPEN) {\r\n        websocket.current.close();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Démarrer l'extraction\r\n  const startExtraction = async () => {\r\n    setIsLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await axios.post(`${API_BASE_URL}/scrape`, {\r\n        url,\r\n        elements: selectedElements,\r\n        use_selenium: useSelenium,\r\n        handle_pagination: handlePagination,\r\n        max_pages: maxPages,\r\n        output_format: outputFormat\r\n      });\r\n      \r\n      const { task_id } = response.data;\r\n      setTaskId(task_id);\r\n      \r\n      // Ajout de la tâche à l'historique\r\n      addTask({\r\n        id: task_id,\r\n        url,\r\n        timestamp: new Date().toISOString(),\r\n        status: 'running',\r\n      });\r\n      \r\n      // Connecter au WebSocket pour les mises à jour\r\n      connectWebSocket(task_id);\r\n      \r\n      // Passer à la dernière étape\r\n      setActiveStep(4);\r\n    } catch (err) {\r\n      console.error('Erreur lors du démarrage de l\\'extraction:', err);\r\n      setError('Impossible de démarrer l\\'extraction. Veuillez réessayer.');\r\n      toast.error('Échec du démarrage de l\\'extraction');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Gérer les changements d'étape\r\n  const handleNext = () => {\r\n    if (activeStep === 0 && isValidUrl) {\r\n      fetchAvailableElements();\r\n    } else if (activeStep === 3) {\r\n      startExtraction();\r\n      return;\r\n    }\r\n    setActiveStep((prevStep) => prevStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevStep) => prevStep - 1);\r\n  };\r\n\r\n  // Gérer la sélection des éléments\r\n  const toggleElement = (element) => {\r\n    if (selectedElements.includes(element)) {\r\n      setSelectedElements(selectedElements.filter(e => e !== element));\r\n    } else {\r\n      setSelectedElements([...selectedElements, element]);\r\n    }\r\n  };\r\n\r\n  // Contenu par étape\r\n  const getStepContent = (step) => {\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <Box sx={{ mt: 3 }}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"URL du site à extraire\"\r\n              variant=\"outlined\"\r\n              value={url}\r\n              onChange={(e) => setUrl(e.target.value)}\r\n              error={!isValidUrl && url !== ''}\r\n              helperText={!isValidUrl && url !== '' ? 'Veuillez entrer une URL valide (ex: https://www.example.com)' : ''}\r\n              sx={{ mb: 3 }}\r\n            />\r\n            <Typography variant=\"body2\" color=\"textSecondary\">\r\n              Entrez l'URL complète du site web dont vous souhaitez extraire les données.\r\n            </Typography>\r\n          </Box>\r\n        );\r\n        \r\n      case 1:\r\n        return (\r\n          <Box sx={{ mt: 3 }}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox \r\n                  checked={useSelenium} \r\n                  onChange={(e) => setUseSelenium(e.target.checked)} \r\n                />\r\n              }\r\n              label=\"Utiliser Selenium pour les sites dynamiques (JavaScript)\"\r\n            />\r\n            <Divider sx={{ my: 2 }} />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox \r\n                  checked={handlePagination} \r\n                  onChange={(e) => setHandlePagination(e.target.checked)} \r\n                />\r\n              }\r\n              label=\"Extraire plusieurs pages (pagination)\"\r\n            />\r\n            {handlePagination && (\r\n              <TextField\r\n                type=\"number\"\r\n                label=\"Nombre maximum de pages\"\r\n                value={maxPages}\r\n                onChange={(e) => setMaxPages(Math.max(1, parseInt(e.target.value) || 1))}\r\n                InputProps={{ inputProps: { min: 1, max: 100 } }}\r\n                sx={{ ml: 3, width: 150 }}\r\n              />\r\n            )}\r\n            <Divider sx={{ my: 2 }} />\r\n            <TextField\r\n              select\r\n              label=\"Format de sortie\"\r\n              value={outputFormat}\r\n              onChange={(e) => setOutputFormat(e.target.value)}\r\n              fullWidth\r\n              sx={{ mt: 2 }}\r\n            >\r\n              <MenuItem value=\"JSON\">JSON</MenuItem>\r\n              <MenuItem value=\"CSV\">CSV</MenuItem>\r\n              <MenuItem value=\"Excel\">Excel</MenuItem>\r\n              <MenuItem value=\"Texte\">Texte</MenuItem>\r\n            </TextField>\r\n          </Box>\r\n        );\r\n        \r\n      case 2:\r\n        return (\r\n          <Box sx={{ mt: 3 }}>\r\n            {isLoading ? (\r\n              <Box sx={{ display: 'flex', justifyContent: 'center', mt: 3 }}>\r\n                <CircularProgress />\r\n              </Box>\r\n            ) : error ? (\r\n              <Alert severity=\"error\" sx={{ mb: 3 }}>\r\n                {error}\r\n              </Alert>\r\n            ) : Object.keys(availableElements).length === 0 ? (\r\n              <Typography>\r\n                Aucun élément trouvé sur cette page. Essayez d'utiliser Selenium pour les sites dynamiques.\r\n              </Typography>\r\n            ) : (\r\n              <Grid container spacing={2}>\r\n                {Object.entries(availableElements).map(([element, count]) => (\r\n                  count > 0 && (\r\n                    <Grid item xs={12} sm={6} md={4} key={element}>\r\n                      <Chip\r\n                        label={`${element} (${count})`}\r\n                        onClick={() => toggleElement(element)}\r\n                        color={selectedElements.includes(element) ? \"primary\" : \"default\"}\r\n                        sx={{ width: '100%', height: 40, fontSize: '1rem' }}\r\n                      />\r\n                    </Grid>\r\n                  )\r\n                ))}\r\n              </Grid>\r\n            )}\r\n            {Object.keys(availableElements).length > 0 && (\r\n              <Box sx={{ mt: 3 }}>\r\n                <Typography variant=\"subtitle1\">\r\n                  Éléments sélectionnés: {selectedElements.length}\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        );\r\n        \r\n      case 3:\r\n        return (\r\n          <Box sx={{ mt: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Résumé de l'extraction\r\n            </Typography>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} sm={6}>\r\n                <Typography variant=\"subtitle1\">URL:</Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">{url}</Typography>\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <Typography variant=\"subtitle1\">Configuration:</Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  {useSelenium ? '✅' : '❌'} Selenium | \r\n                  {handlePagination ? `✅ Pagination (${maxPages} pages)` : '❌ Pagination'} | \r\n                  Format: {outputFormat}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Typography variant=\"subtitle1\">Éléments à extraire:</Typography>\r\n                <Box sx={{ mt: 1, display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                  {selectedElements.map(element => (\r\n                    <Chip \r\n                      key={element} \r\n                      label={element} \r\n                      size=\"small\" \r\n                      color=\"primary\" \r\n                    />\r\n                  ))}\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        );\r\n        \r\n      case 4:\r\n        return (\r\n          <Box sx={{ mt: 3, textAlign: 'center' }}>\r\n            {isLoading || taskStatus === 'running' ? (\r\n              <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <CircularProgress \r\n                  variant=\"determinate\" \r\n                  value={progress} \r\n                  size={80} \r\n                  thickness={4}\r\n                  sx={{ mb: 3 }}\r\n                />\r\n                <Typography variant=\"h6\">\r\n                  Extraction en cours... {progress}%\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                  Veuillez patienter pendant que nous extrayons vos données.\r\n                </Typography>\r\n              </Box>\r\n            ) : taskStatus === 'completed' ? (\r\n              <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <CheckIcon color=\"success\" sx={{ fontSize: 80, mb: 3 }} />\r\n                <Typography variant=\"h6\">\r\n                  Extraction terminée avec succès!\r\n                </Typography>\r\n                <Button \r\n                  variant=\"contained\" \r\n                  color=\"primary\"\r\n                  onClick={() => navigate(`/results/${taskId}`)}\r\n                  sx={{ mt: 3 }}\r\n                >\r\n                  Voir les résultats\r\n                </Button>\r\n              </Box>\r\n            ) : taskStatus === 'failed' ? (\r\n              <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <ErrorIcon color=\"error\" sx={{ fontSize: 80, mb: 3 }} />\r\n                <Typography variant=\"h6\">\r\n                  L'extraction a échoué\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                  {error || \"Une erreur s'est produite lors de l'extraction.\"}\r\n                </Typography>\r\n                <Button \r\n                  variant=\"contained\" \r\n                  onClick={() => setActiveStep(0)}\r\n                  sx={{ mt: 3 }}\r\n                >\r\n                  Réessayer\r\n                </Button>\r\n              </Box>\r\n            ) : (\r\n              <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <CloudIcon color=\"primary\" sx={{ fontSize: 80, mb: 3 }} />\r\n                <Typography variant=\"h6\">\r\n                  Prêt à démarrer l'extraction\r\n                </Typography>\r\n                <Button \r\n                  variant=\"contained\" \r\n                  color=\"primary\"\r\n                  onClick={startExtraction}\r\n                  sx={{ mt: 3 }}\r\n                >\r\n                  Lancer l'extraction\r\n                </Button>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        );\r\n        \r\n      default:\r\n        return 'Unknown step';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\r\n      <Paper elevation={3} sx={{ p: 4, borderRadius: 2 }}>\r\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\r\n          Extraire des données web\r\n        </Typography>\r\n        \r\n        <Stepper activeStep={activeStep} alternativeLabel sx={{ mb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n        \r\n        {getStepContent(activeStep)}\r\n        \r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 4 }}>\r\n          <Button \r\n            disabled={activeStep === 0 || activeStep === 4}\r\n            onClick={handleBack}\r\n          >\r\n            Précédent\r\n          </Button>\r\n          \r\n          {activeStep < 4 && (\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleNext}\r\n              disabled={(activeStep === 0 && !isValidUrl) || \r\n                       (activeStep === 2 && selectedElements.length === 0) ||\r\n                       isLoading}\r\n            >\r\n              {activeStep === 3 ? 'Extraire' : 'Suivant'}\r\n            </Button>\r\n          )}\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Extraction;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}